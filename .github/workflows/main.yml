name: Run m.js on Bruh Machines

on:
  workflow_dispatch:
  push:
    branches: [ main, master ]

jobs:
  parallel-bruh-machines:
    name: Bruh Machine ${{ matrix.bruh-id }}
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        bruh-id: [bruh-1, bruh-2, bruh-3, bruh-4, bruh-5, bruh-6, bruh-7, bruh-8, bruh-9, bruh-10]
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'

    - name: Display bruh machine info
      run: |
        echo "Running on bruh machine: ${{ matrix.bruh-id }}"
        echo "This is one of 10 parallel bruh machines"
        echo "Machine ID: ${{ matrix.bruh-id }}"

    - name: Execute m.js on bruh machine
      run: node m.js 250 https://rapidis.gay/7778079525-435eb0ec-f821-4c91-a44f-da4276997baf 4 h1 
      env:
        BRUH_MACHINE_ID: ${{ matrix.bruh-id }}
        TOTAL_BRUH_MACHINES: 10
